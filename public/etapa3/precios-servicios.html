<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Precios por servicio</title>
  <link rel="stylesheet" href="precios-servicios.css" />
</head>

<body>
  <header>
    <div class="barra_superior">
      <div class="div1">
        <h1>Precios por servicio (NO alojamiento)</h1>
      </div>
      <div class="div2">
        <p class="muted">
          Filtra por ubicación para que el servicio tenga contexto. Si dejas un mes vacío, queda NULL.
        </p>
      </div>
    </div>
  </header>

  <main>
    <section>
      <!-- =========================
           BLOQUE FILTROS
      ========================== -->
      <div class="parent_filtros">
        <div class="div1">
          <h2>Filtros</h2>
          <p class="card-subtitle muted">Reduce la lista de servicios por ubicación y tipo.</p>
        </div>

        <div class="div3">
          <label>Continente <br/>
            <select id="filtro-continente"></select>
          </label>
        </div>

        <div class="div4">
          <label>País <br/>
            <select id="filtro-pais"></select>
          </label>
        </div>

        <div class="div5">
          <label>Ciudad <br/>
            <select id="filtro-ciudad"></select>
          </label>
        </div>

        <div class="div6">
          <label>Tipo servicio<br/>
            <select id="filtro-tipo"></select>
          </label>
        </div>

        <div class="div7">
          <label>Año <br/>
            <select id="sel-anio">
              <option value="2025">2025</option>
              <option value="2026">2026</option>
            </select>
          </label>
        </div>
      </div>

      <!-- =========================
           BLOQUE SELECCIÓN SERVICIO (TODOS)
      ========================== -->
      <div class="parent_seleccionar_servicio">
        <div class="div1">
          <h2>Elige un servicio</h2>
          <p>Selecciona el servicio para abrir modal de datos o modal de precios.</p>
        </div>

        <div class="div8">
          <label for="sel-servicio">Servicio<br/>
            <select id="sel-servicio"></select>
          </label>
        </div>

        <!-- ✅ Botones al lado del select -->
        <div class="div9">
          <button id="btn-servicio-datos" type="button" class="btn-secondary">
            Mostrar datos
          </button>
        </div>

        <div class="div10">
          <button id="btn-servicio-precio" type="button" class="btn-primary">
            Mostrar precio
          </button>
        </div>
      </div>

      <!-- =========================
           TABLA FIJA: SERVICIOS SIN PRECIO (SIEMPRE VISIBLE)
      ========================== -->
      <section class="card card-sin-precio" aria-label="Servicios sin precio">
        <div class="parent_tabla_servicios_sin_precio">
          <div class="div1">  
            <h2 class="card-title">Servicios sin precio</h2>
            <p class="card-subtitle muted">
              Lista de servicios que no tienen el precio completo para el año seleccionado y filtros actuales.
            </p>
          </div>
        </div>
        <div class="container">
          <table class="table">
            <thead>
              <tr>
                <th>Ciudad</th>
                <th>Nombre WTravel</th>
                <th>Acciones</th>
              </tr>
            </thead>

            <!-- Este tbody es obligatorio para pintar filas -->
            <tbody id="tbody-sin-precio"></tbody>
          </table>
        </div>

        <div class="parent_tabla_servicios_sin_precio">
          <div class="div1">
            <button id="btn-recargar-sin-precio" type="button" class="btn-secondary">
              Recargar tabla
            </button>
            <span id="msg-sin-precio" class="msg" role="status" aria-live="polite"></span>
          </div>
        </div>
      </section>

      <!-- =========================
          MODAL 1: MOSTRAR / EDITAR DATOS
      ========================== -->
      <dialog id="modal-datos" class="modal">
        <div class="modal-shell">

          <!-- HEADER -->
          <div class="modal-header">
            <div>
              <h2 class="modal-title">Datos del servicio</h2>

              <div class="modal-hero">
                <div class="modal-hero-title" id="modal-datos-nombre">—</div>
                <div class="modal-hero-sub" id="modal-datos-ciudad">—</div>
              </div>
            </div>

            <div class="modal-header-actions">
              <button id="btn-modal-datos-abrir-precios" type="button" class="btn-primary">
                Ver / Editar precios
              </button>
              <button id="btn-modal-datos-cerrar" type="button" class="btn-secondary">
                Cerrar
              </button>
            </div>
          </div>

          <!-- BODY -->
          <div class="modal-body">

            <!-- =======================
                VISTA (bonita)
            ======================== -->
            <div id="modal-datos-view">

              <!-- GENERALES -->
              <section class="card modal-card" aria-label="Datos generales del servicio">
                <div class="card-head">
                  <h3 class="card-title">Generales</h3>
                  <p class="card-subtitle muted">Información base del servicio.</p>
                </div>

                <div class="modal-kv-grid">
                  <div class="k">Tipo</div><div class="v" id="md-tipo">—</div>
                  <div class="k">Proveedor</div><div class="v" id="md-proveedor">—</div>
                  <div class="k">Tiempo</div><div class="v" id="md-tiempo">—</div>
                  <div class="k">Privado</div><div class="v" id="md-privado">—</div>

                  <div class="k">Link</div>
                  <div class="v">
                    <a id="md-link" href="#" target="_blank" rel="noopener">—</a>
                  </div>

                  <div class="k">Descripción</div>
                  <div class="v" id="md-descripcion">—</div>
                </div>
              </section>

              <!-- DETALLES POR TIPO (placeholders listos para luego) -->
              <section class="card modal-card" aria-label="Detalles del tipo de servicio">
                <div class="card-head">
                  <h3 class="card-title">Detalles</h3>
                  <p class="card-subtitle muted">Depende del tipo de servicio.</p>
                </div>

                <!-- BOLETO -->
                <div id="view-sec-boleto" style="display:none;">
                  <div class="modal-kv-grid">
                    <div class="k">Lugar</div><div class="v" id="md-be-lugar">—</div>
                    <div class="k">Tipo de entrada</div><div class="v" id="md-be-tipo-entrada">—</div>
                    <div class="k">Tipo de guía</div><div class="v" id="md-be-tipo-guia">—</div>
                    <div class="k">Idioma</div><div class="v" id="md-be-idioma">—</div>
                  </div>
                </div>

                <!-- TOUR / VISITA / EXCURSIÓN -->
                <div id="view-sec-tour" style="display:none;">
                  <div class="modal-kv-grid">
                    <div class="k">Tipo de guía</div><div class="v" id="md-tu-tipo-guia">—</div>
                    <div class="k">Idioma</div><div class="v" id="md-tu-idioma">—</div>
                  </div>
                </div>

                <!-- TRASLADO -->
                <div id="view-sec-traslado" style="display:none;">
                  <div class="modal-kv-grid">
                    <div class="k">Origen</div><div class="v" id="md-tr-origen">—</div>
                    <div class="k">Destino</div><div class="v" id="md-tr-destino">—</div>
                    <div class="k">Tipo de traslado</div><div class="v" id="md-tr-tipo">—</div>
                    <div class="k">Vehículo</div><div class="v" id="md-tr-vehiculo">—</div>
                  </div>
                </div>

                <!-- VUELO -->
                <div id="view-sec-vuelo" style="display:none;">
                  <div class="modal-kv-grid">
                    <div class="k">Origen</div><div class="v" id="md-vu-origen">—</div>
                    <div class="k">Destino</div><div class="v" id="md-vu-destino">—</div>
                    <div class="k">Escalas</div><div class="v" id="md-vu-escalas">—</div>
                    <div class="k">Clase</div><div class="v" id="md-vu-clase">—</div>
                    <div class="k">Equipaje</div><div class="v" id="md-vu-equipaje">—</div>
                  </div>
                </div>

                <!-- TREN -->
                <div id="view-sec-tren" style="display:none;">
                  <div class="modal-kv-grid">
                    <div class="k">Origen</div><div class="v" id="md-trn-origen">—</div>
                    <div class="k">Destino</div><div class="v" id="md-trn-destino">—</div>
                    <div class="k">Escalas</div><div class="v" id="md-trn-escalas">—</div>
                    <div class="k">Clase</div><div class="v" id="md-trn-clase">—</div>
                    <div class="k">Equipaje</div><div class="v" id="md-trn-equipaje">—</div>
                    <div class="k">Asientos reservados</div><div class="v" id="md-trn-sillas">—</div>
                  </div>
                </div>

                <!-- Si no hay nada -->
                <div id="view-sec-empty" class="muted">
                  Selecciona “Editar datos” para ver y ajustar los campos del tipo.
                </div>
              </section>

              <!-- CTA -->
              <div class="modal-footer">
                <button id="btn-modal-datos-editar" type="button" class="btn-secondary">
                  Editar datos
                </button>
              </div>
            </div>

            <!-- =======================
                EDICIÓN (FULL)
            ======================== -->
            <div id="modal-datos-edit" style="display:none;">

              <!-- UBICACIÓN + TIPO + NOMBRE AUTO -->
              <section class="card modal-card" aria-label="Ubicación y tipo">
                <div class="card-head">
                  <h3 class="card-title">Ubicación y tipo</h3>
                  <p class="card-subtitle muted">Estos campos controlan qué sección dinámica aparece.</p>
                </div>

                <form id="form-editar-servicio" class="form-modal">

                  <div class="form-row">
                    <label class="form-group">Continente<br/>
                      <select id="edit-continente"></select>
                    </label>

                    <label class="form-group">País<br/>
                      <select id="edit-pais"></select>
                    </label>

                    <label class="form-group">Ciudad<br/>
                      <select id="edit-ciudad"></select>
                    </label>
                  </div>

                  <div class="form-row">
                    <label class="form-group">Tipo de servicio<br/>
                      <select id="edit-tipo-servicio"></select>
                    </label>

                    <label class="form-group" style="flex:1;">Nombre del servicio (automático)<br/>
                      <input id="edit-nombre-auto" type="text" placeholder="Se arma automáticamente..." readonly />
                    </label>
                  </div>

                  <!-- BASE -->
                  <section class="divider"></section>

                  <div class="form-row">
                    <label class="form-group">Proveedor<br/>
                      <select id="edit-id-proveedor"></select>
                    </label>

                    <label class="form-group">Tiempo del servicio<br/>
                      <select id="edit-tiempo-servicio-select"></select>
                      <input id="edit-tiempo-servicio-txt"
                            type="text"
                            placeholder="¿Cuál?"
                            style="display:none; margin-top:6px;">
                    </label>
                  </div>

                  <div class="form-row">
                    <label class="form-group">Privado<br/>
                      <select id="edit-privado">
                        <option value="0">No</option>
                        <option value="1">Sí</option>
                      </select>
                    </label>

                    <label class="form-group">Link de reserva<br/>
                      <input type="url" id="edit-link-reserva" placeholder="https://..." />
                    </label>
                  </div>

                  <div class="form-row">
                    <label class="form-group" style="flex:1;">Descripción<br/>
                      <input type="text" id="edit-descripcion" placeholder="Opcional..." />
                    </label>
                  </div>

                  <!-- =========================
                      SECCIONES DINÁMICAS (FULL)
                  ========================== -->

                  <!-- ALOJAMIENTO (por si luego lo activas) -->
                  <div id="edit-sec-alojamiento" class="card inner-card" style="display:none;">
                    <h4 class="inner-title">Alojamiento</h4>
                    <div class="form-row">
                      <label class="form-group">Noches<br/>
                        <input id="edit-aloj-noches" type="number" min="1" step="1" />
                      </label>
                      <label class="form-group">Habitaciones<br/>
                        <input id="edit-aloj-habitaciones" type="number" min="1" step="1" />
                      </label>
                    </div>

                    <div class="form-row">
                      <label class="form-group">Régimen<br/>
                        <select id="edit-aloj-regimen"></select>
                        <input id="edit-aloj-regimen-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe el régimen..." />
                      </label>
                      <label class="form-group">Categoría hotel<br/>
                        <select id="edit-aloj-categoria-hotel"></select>
                        <input id="edit-aloj-categoria-hotel-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe la categoría..." />
                      </label>
                      <label class="form-group">Categoría hab.<br/>
                        <select id="edit-aloj-categoria-hab"></select>
                        <input id="edit-aloj-categoria-hab-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe la categoría..." />
                      </label>
                    </div>
                  </div>

                  <!-- BOLETO -->
                  <div id="edit-sec-boleto" class="card inner-card" style="display:none;">
                    <h4 class="inner-title">Boleto de entrada</h4>

                    <div class="form-row">
                      <label class="form-group">Lugar<br/>
                        <select id="edit-be-lugar-select"></select>
                        <input id="edit-be-lugar-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe el lugar..." />
                      </label>

                      <label class="form-group">Tipo de entrada<br/>
                        <select id="edit-be-tipo-entrada"></select>
                        <input id="edit-be-tipo-entrada-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe el tipo..." />
                      </label>
                    </div>

                    <div class="form-row">
                      <label class="form-group">Tipo de guía<br/>
                        <select id="edit-be-tipo-guia"></select>
                        <input id="edit-be-tipo-guia-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe el tipo..." />
                      </label>

                      <label class="form-group">Idioma<br/>
                        <select id="edit-be-idioma"></select>
                        <input id="edit-be-idioma-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe el idioma..." />
                      </label>
                    </div>
                  </div>

                  <!-- VUELO -->
                  <div id="edit-sec-vuelo" class="card inner-card" style="display:none;">
                    <h4 class="inner-title">Vuelo</h4>

                    <div class="form-row">
                      <label class="form-group">Origen<br/>
                        <select id="edit-vu-origen"></select>
                        <input id="edit-vu-origen-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe el origen..." />
                      </label>

                      <label class="form-group">Destino<br/>
                        <select id="edit-vu-destino"></select>
                        <input id="edit-vu-destino-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe el destino..." />
                      </label>
                    </div>

                    <div class="form-row">
                      <label class="form-group">Clase<br/>
                        <select id="edit-vu-clase"></select>
                      </label>

                      <label class="form-group">Escalas<br/>
                        <select id="edit-vu-escalas"></select>
                      </label>

                      <label class="form-group">Equipaje<br/>
                        <select id="edit-vu-equipaje"></select>
                      </label>
                    </div>
                  </div>

                  <!-- TREN -->
                  <div id="edit-sec-tren" class="card inner-card" style="display:none;">
                    <h4 class="inner-title">Tren</h4>

                    <div class="form-row">
                      <label class="form-group">Origen<br/>
                        <select id="edit-tr-origen"></select>
                        <input id="edit-tr-origen-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe el origen..." />
                      </label>

                      <label class="form-group">Destino<br/>
                        <select id="edit-tr-destino"></select>
                        <input id="edit-tr-destino-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe el destino..." />
                      </label>
                    </div>

                    <div class="form-row">
                      <label class="form-group">Clase<br/>
                        <select id="edit-tr-clase"></select>
                      </label>

                      <label class="form-group">Escalas<br/>
                        <select id="edit-tr-escalas"></select>
                      </label>

                      <label class="form-group">Equipaje<br/>
                        <select id="edit-tr-equipaje"></select>
                      </label>

                      <label class="form-group">Asientos reservados<br/>
                        <select id="edit-tr-sillas">
                          <option value="0">No</option>
                          <option value="1">Sí</option>
                        </select>
                      </label>
                    </div>
                  </div>

                  <!-- TRASLADO -->
                  <div id="edit-sec-traslado" class="card inner-card" style="display:none;">
                    <h4 class="inner-title">Traslado</h4>

                    <div class="form-row">
                      <label class="form-group">Origen<br/>
                        <select id="edit-trs-origen-select"></select>
                        <input id="edit-trs-origen-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe el origen..." />
                      </label>

                      <label class="form-group">Destino<br/>
                        <select id="edit-trs-destino-select"></select>
                        <input id="edit-trs-destino-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe el destino..." />
                      </label>
                    </div>

                    <div class="form-row">
                      <label class="form-group">Tipo de traslado<br/>
                        <select id="edit-trs-tipo"></select>
                        <input id="edit-trs-tipo-otro" type="text" style="display:none; margin-top:6px;" placeholder="Escribe el tipo..." />
                      </label>

                      <label class="form-group">Vehículo<br/>
                        <select id="edit-trs-vehiculo"></select>
                        <input id="edit-trs-vehiculo-txt" type="text" style="display:none; margin-top:6px;" placeholder="Escribe el vehículo..." />
                      </label>
                    </div>

                    <div class="form-row">
                      <label class="form-group" style="flex:1;">Nota<br/>
                        <input id="edit-trs-nota" type="text" placeholder="Opcional..." />
                      </label>
                    </div>
                  </div>

                 <!-- TOUR / VISITA / EXCURSIÓN -->
                  <div id="edit-sec-tour" class="card inner-card" style="display:none;">
                    <h4 class="inner-title">Excursión / Visita</h4>

                    <div class="form-row">
                      <label class="form-group">Tipo de guía<br/>
                        <select id="edit-tu-tipo-guia"></select>
                        <input id="edit-tu-tipo-guia-otro"
                              type="text"
                              style="display:none; margin-top:6px;"
                              placeholder="Escribe el tipo..." />
                      </label>

                      <label class="form-group">Idioma<br/>
                        <select id="edit-tu-idioma"></select>
                        <input id="edit-tu-idioma-txt"
                              type="text"
                              style="display:none; margin-top:6px;"
                              placeholder="Escribe el idioma..." />
                      </label>
                    </div>
                  </div>

                  <!-- MENSAJE -->
                  <div class="form-row">
                    <span id="msg-editar-servicio" class="msg" role="status" aria-live="polite"></span>
                  </div>
                </form>
              </section>

              <!-- BOTONES EDICIÓN -->
              <div class="modal-footer" style="justify-content:center; gap:10px;">
                <button id="btn-modal-datos-guardar" type="button" class="btn-primary">
                  Guardar cambios
                </button>

                <button id="btn-modal-datos-cancelar" type="button" class="btn-secondary">
                  Cancelar
                </button>

              </div>
            </div>

          </div>
        </div>
      </dialog>


      <!-- =========================
           MODAL 2: MOSTRAR PRECIOS (SOLO PRECIOS)
      ========================== -->
      <dialog id="modal-precios" class="modal">
        <div class="parent_modal_mostrar_precios">
          <div class="div1">
            <h2 class="modal-title">Precios del servicio</h2>
            <p class="muted" id="modal-precios-subtitle">Edita los 12 meses para el año seleccionado.</p>
          </div>
          <div class="div15">
            <p class="modal-context">
              <strong>Servicio:</strong>
              <span id="modal-precios-servicio-nombre">—</span>
            </p>
          </div>
          <div class="div16">
            <p class="modal-context">
              <strong>Año:</strong>
              <span id="modal-precios-anio">—</span>
            </p>
          </div>
          <div class="div19">
            <h3>Precios por mes</h3>
          </div>
        </div>

        <section class="card" aria-label="Precios por mes">
          <div class="table-wrap">
            <table class="table">
              <thead>
                <tr>
                  <th>Mes</th>
                  <th>Precio USD</th>
                </tr>
              </thead>
              <tbody id="modal-tbody-precios"></tbody>
            </table>
          </div>
        </section>
        
        <div class="parent_modal_botones_mostrar_precios">
          <div class="div18">
            <button id="btn-modal-precios-cerrar" type="button" class="btn-secondary">Cerrar</button>
          </div>
          <div class="div17">
            <button id="btn-modal-guardar-precios" type="button" class="btn-primary">Guardar</button>
          </div>
        </div>
      </dialog>
    </section>
  </main>

  <script src="./precios-servicios.js"></script>
</body>
</html>
